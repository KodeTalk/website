<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by Free CSS Templates
http://www.freecsstemplates.org
Released for free under a Creative Commons Attribution 2.5 License

Name       : ExtremeSurfing
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20120225

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Pengenalan Silex Part 2 - Restful Routing - Let&#039;s Talk About Code</title>
<link href="http://fonts.googleapis.com/css?family=Oswald" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>
<link href="/css/style.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
<div id="wrapper">
  <div id="page">
    <div id="page-bgtop">
      <div id="page-bgbtm">
        <div id="page-content">
          <div id="header-wrapper">
            <div id="header">
              <div id="logo">
                <h1><a href="#">KodeTalk</a></h1>
                <p>Let&#039;s Talk About Code</p>
              </div>
            </div>
          </div>
          <!-- end #header -->
          <div id="menu-wrapper">
  <div id="menu">
    <ul>
              <li><a href="/index.html">Homepage</a></li>
              <li><a href="/tolkien.html">Tolkien</a></li>
          </ul>
  </div>
</div>
<!-- end #menu -->
<div id="banner"><img src="/images/banner.jpg" width="940" height="300" alt="" /></div>
          <div id="content">
            <div class="post">
	<h2 class="title"><a href="#">Pengenalan Silex Part 2 - Restful Routing</a></h2>
	<p class="meta">Posted by 
		<a href="#">Glend Maatita</a> on October 25, 2013 &nbsp;&bull;&nbsp;
				  <a href="/categories/php.html" class="permalink">Php</a> 
	  		  <a href="/categories/framework.html" class="permalink">Framework</a> 
	  		  <a href="/categories/silex.html" class="permalink">Silex</a> 
	  	</p>
	<div class="entry">
		<p>Di part ini kita akan membuat contoh aplikasi Restfull sederhana dengan menggunakan Silex Framework. Disamping itu, kita juga akan mengintegrasikan Silex dengan beberapa komponen Symfony lainnya seperti <a href="http://twig.sensiolabs.org/">Twig Template Engine</a> dan <a href="http://www.doctrine-project.org/projects/dbal.html">Doctrine DBAL</a>. Here we go..</p>

<p>Kita buat dulu database nya. Kita akan membuat aplikasi sederhana untuk mengatur User. Terdiri dari Create, Read, Update, Delete atau lebih dikenal dengan singkatan CRUD. Yap, kita akan buat CRUD User. Kita akan punya database <strong>silexproject.db</strong> dengan table user seperti yang terlihat dibawah ini</p>

<pre><code>+--------------+------------------+
| Kolom        | Tipe Data        |
+--------------+------------------+
| id           | int              |
| nama         | varchar(255)     |
| gender       | char(1)          |
| email        | varchar(255)     |
| telepon      | varchar(255)     |
| alamat       | text             |
+--------------+------------------+
</code></pre>

<p>nb: di komputer saya, saya punya rincian database seperti berikut</p>

<pre><code>nama database : silexproject.db
user : root
password : password
</code></pre>

<p>Silakan sesuaikan dengan komputer anda masing-masing.</p>

<p>Untuk routing Restful nya akan kita buat seperti ini</p>

<pre><code>+-----------------+------------------+---------------------+
| Method          | Endpoint         | Keterangan          |
+-----------------+------------------+---------------------+
| GET             | /users           | Get all users       |
| GET             | /user/new        | Add new user        |
| POST            | /users           | Save new user       |
| GET             | /user/{id}       | Get a user          |
| GET             | /user/{id}/edit  | Edit user           |
| PUT             | /user/{id}       | Update user         |
| DELETE          | /user/{id}       | Delete a user       |
+-----------------+------------------+---------------------+
</code></pre>

<p><strong>Setting Doctrine DBAL dan Twig</strong></p>

<p>Doctrine dan Twig adalah salah satu komponen ORM dari Symfony. Dan karena Silex juga merupakan bagian dari Symfony, maka integrasi dengan Doctrine DBAL dan Twig akan sangat mudah via service provider. Pertama, kita require dulu Doctrine DBAL dan Twig ke dalam <strong>composer.json</strong> kita</p>

<pre><code>{
    "require": {
        "silex/silex": "~1.0",
        "twig/twig": "v1.13.2",
        "doctrine/dbal": "2.2.*"
    }
}
</code></pre>

<p>Lalu install</p>

<pre><code>~$ php composer.phar install
</code></pre>

<p>Langkah berikutnya adalah men-setting service provider untuk Doctrine dan Twig agar dapat dengan mudah digunakan di dalam Silex Framework. Kita tambahkan dulu namespace untuk dua komponen tersebut</p>

<pre><code>...
use Silex\Provider\DoctrineServiceProvider;
use Silex\Provider\TwigServiceProvider;
</code></pre>

<p>Kemudian, daftarkan dua komponen tersebut ke dalam service provider</p>

<pre><code>/* DOCTRINE DBAL */
$app-&gt;register(new Silex\Provider\DoctrineServiceProvider(), array(
    'dbs.options' =&gt; array (
        'mysql_read' =&gt; array(
            'driver'    =&gt; 'pdo_mysql',
            'host'      =&gt; 'localhost',
            'dbname'    =&gt; 'silexproject.db',
            'user'      =&gt; 'root',
            'password'  =&gt; 'password',
            'charset'   =&gt; 'utf8'
        )
    )
));

/** TWIG */
$app-&gt;register(new TwigServiceProvider(), array(
    'twig.path' =&gt; __DIR__.'/views',
));
</code></pre>

<p>Terlihat di konfigurasi diatas bahwa kita akan meletakkan file-file template untuk Twig pada folder <strong>views</strong>.</p>

<p><strong>Setting Routing</strong></p>

<p>Langkah berikutnya adalah membuat routing. Routing di Silex sangat unik dan simple. Dengan memanfaatkan <strong>closure</strong> kita dapat membuat suatu routing dengan cara seperti ini</p>

<pre><code>$app-&gt;get('/', function(Request $request) use($app) {

});
</code></pre>

<p>variabel <strong>$app</strong> adalah variabel yang bernilai instance dari <strong>Silex\Application</strong>. Sedangkan <strong>$app->get</strong> berarti function tersebut akan menangkan request dengan method <em>GET</em>. Dan <strong>('/')</strong>  adalah endpoint. Sehingga routing diatas dapat diterjemahkan menjadi routing yang menangkap setiap Request di URL (/) dengan method GET, serta memasukkan beberapa parameter yaitur $request dan $app. Mudah bukan :) ?</p>

<p>Jadi, jika kita mempunyai list endpoint seperti diatas, maka harusnya kita akan mempunyai list routing seperti berikut ini</p>

<pre><code>// Get all users
$app-&gt;get('/users', function(Request $request) use($app) {

});

// new user
$app-&gt;get('/user/new', function(Request $request) use($app) {

});

// save new user
$app-&gt;post('/users', function(Request $request) use($app) {

});

// show a user with ID
$app-&gt;get('/user/{id}', function(Request $request, $id) use($app) {

});

// edit a user
$app-&gt;get('/user/{id}/edit', function(Request $request, $id) use($app) {

});

// update a user
$app-&gt;put('/user/{id}', function(Request $request, $id) use($app) {

});

// delete a user
$app-&gt;delete('/user/{id}', function(Request $request, $id) use($app) {

});
</code></pre>

<p>yap, sekian Part 2 ini tentang routing restfull dengan Silex. Part berikutnya kita akan membuat kode production aplikasi dengan menggunakan Silex Framework, Doctrine DBAL, dan Twig Template Engine</p>

<p>Stay tune dan Happy Coding :)</p>
 
	</div>
</div>
            <div style="clear: both;">&nbsp;</div>
          </div>
          <!-- end #content -->
          <div id="sidebar">
	<ul>
		<li>
			<h2>Situs apa sih ini?</h2>
			<p>KodeTalk adalah sebuah kumpulan tulisan seputar web development dan programming. Let's talk about code here.</p>
		</li>
		<li>
			<h2>Kategori</h2>
			<ul>
					      	<li><a href="/categories/ruby.html">Ruby</a></li>
	      	      	<li><a href="/categories/notes.html">Notes</a></li>
	      	      	<li><a href="/categories/programming.html">Programming</a></li>
	      	      	<li><a href="/categories/cloud.html">Cloud</a></li>
	      	      	<li><a href="/categories/python.html">Python</a></li>
	      	      	<li><a href="/categories/review.html">Review</a></li>
	      	      	<li><a href="/categories/php.html">Php</a></li>
	      	      	<li><a href="/categories/framework.html">Framework</a></li>
	      	      	<li><a href="/categories/silex.html">Silex</a></li>
	      	      	<li><a href="/categories/git.html">Git</a></li>
	      	      	<li><a href="/categories/emacs.html">Emacs</a></li>
	      	      	<li><a href="/categories/linux.html">Linux</a></li>
	      			</ul>
		</li>							
	</ul>
</div>
<!-- end #sidebar -->        </div>
        <div style="clear: both;">&nbsp;</div>
      </div>
    </div>
  </div>
  <!-- end #page -->
</div>
<div id="footer">
	<p>Copyright (c) 2012 KodeTalk.com. All rights reserved. Design by <a href="http://www.freecsstemplates.org/"> CSS Templates</a>.</p>
</div><!-- end #footer -->
</body>
</html>
